<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>AndroidChannel : Burt.K</title>

    <link href='https://fonts.googleapis.com/css?family=Lato:300italic,700italic,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header >
        <h1><a href="/">Burt.K</a></h1>
        
          <p>코코아를 좋아하는 프로그래머입니다 ;)</p>
        

        <ul>
          <li><a href="/about"><strong>소개</strong></a></li>
          <li><a href="/archive"><strong>아카이브</strong></a></li>
        </ul>        

      </header>
      <section>


		<h1 class="entry-title">
		
		    <a href="/androidchannel/">AndroidChannel</a>
		
		
		</h1>
		
      <p>안드로이드 프로그래밍을 하면서 Handler를 사용해서 메인 스레드와 워커 스레드간에 통신을 할 때, 작성해야하는 코드가 매번 부담이 되서 AndroidChannel이라는 라이브러리로 만들어 보았습니다.</p>

<p>AndroidChannel을 사용하여 Ping-Pong 코드를 아래처럼 작성할 수 있습니다.<!--more--></p>

<pre class="lang:java decode:true ">channel = new Channel(new Channel.UiCallback() {
    @Override
    public boolean handleUiMessage(Message msg) {

        if(msg.what == PING) {
            Log.d("TAG", "PING");
            channel.toWorker().sendEmptyMessageDelayed(PONG, 1000);
        }
        return false;
    }
}, new Channel.WorkerCallback() {
    @Override
    public boolean handleWorkerMessage(Message msg) {

        if(msg.what == PONG) {
            Log.d("TAG", "PONG");
            channel.toUI().sendEmptyMessageDelayed(PING, 1000);
        }
        return false;
    }
});
channel.toUI().sendEmptyMessage(PING);</pre>

<p>Handler를 사용해서 메시지를 주고 받는 간단한 코드입니다. 타이머가 필요할 경우 매번 코드를 작성하기가 그래서 AndroidChannel을 사용해서 타이머를 만들었습니다. 아래와 같이 타이머를 생성하고 사용할 수 있고 타이머 실행 중에 타이머 인터벌을 변경할 수 있습니다.</p>

<pre class="lang:default decode:true">timer = new Timer(1000, new Timer.OnTimer() {
  int count = 0;
  @Override
  public void onTimer(Timer timer) {
      count++;
      textView.setText("count : " + count);
      if(count == 10) {
          timer.resetInterval(2000);
      }
  }
});
timer.start();</pre>

<p>AndroidChannel의 소스코드 및 사용법은 <a href="https://github.com/skyfe79/AndroidChannel">Github</a>에서 확인하실 수 있습니다. 이번에 <a href="http://sunghwanjo94.blogspot.kr/2015/07/jcenter.html">조성환님의 jCenter에 안드로이드 라이브러리 배포하기</a> 글을 참고해서 jcenter에 라이브러리를 배보해 보았는데요 정말 편하네요.</p>


		<div style='height: 20px'>
    
    	<div style='float:left'>
        <a class="equalize" href="/%eb%82%98%ec%9d%b4%ec%8a%a4/" title="Previous Post: 나이스!">
                <b> ← 나이스! </b>
        </a>
		</div>
    
    <div style='float:right'>
        <a class="equalize" href="/ndk-%eb%9d%bc%ec%9d%b4%eb%b8%8c%eb%9f%ac%eb%a6%ac-%eb%b0%b0%ed%8f%ac-%ec%8b%9c-java-lang-unsatisfiedlinkerror-%ec%97%90-%eb%8c%80%ed%95%b4%ec%84%9c/" title="next Post: NDK 라이브러리 배포 시 java.lang.UnsatisfiedLinkError 에 대해서.">
                <b> NDK 라이브러리 배포 시 java.lang.UnsatisfiedLinkError 에 대해서. → </b>
        </a>
    </div>
</div>    
		
      </section>
    </div>
    <footer>
     <p></a></p>
     <p>Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    
  </body>
</html>
