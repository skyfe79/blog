<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Javah를 AndroidStudio에서 사용하기 : Burt.K</title>

    <link href='https://fonts.googleapis.com/css?family=Lato:300italic,700italic,300,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="/assets/js/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header >
        <h1><a href="/">Burt.K</a></h1>
        
          <p>코코아를 좋아하는 프로그래머입니다 ;)</p>
        

        <ul>
          <li><a href="/about"><strong>소개</strong></a></li>
          <li><a href="/archive"><strong>아카이브</strong></a></li>
        </ul>        

      </header>
      <section>


		<h1 class="entry-title">
		
		    <a href="/javah%eb%a5%bc-androidstudio%ec%97%90%ec%84%9c-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0/">Javah를 AndroidStudio에서 사용하기</a>
		
		
		</h1>
		
      <p>NDK 개발을 하면서 귀찮은 점은 classes 파일에서 JNI 형식에 맞는  C 언어 헤더파일을 만드는 일이다. 이 것을 자동으로 해주는 것이 javah 인데, 이클립스에서는 쉽게 연동이 가능해 쉽게 사용할 수 있다. AndroidStudio 에서도 이클립스처럼 쉽게 할 수 있는 방법이 있다. 바로 External Tools 로 등록해서 사용하는 것이다. 아래 그림처럼 Android Studio -&gt; Preferences… 메뉴를 선택한다.<!--more--></p>

<p><a href="http://i2.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.10.45.png"><img class="size-full wp-image-143 aligncenter" src="http://i2.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.10.45.png?resize=243%2C242" alt="" srcset="http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.10.45.png?w=243 243w, http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.10.45.png?resize=150%2C150 150w" sizes="(max-width: 243px) 100vw, 243px" data-recalc-dims="1" /></a></p>

<p> </p>

<p>External Tools를 선택하고 + 버튼을 누른다.</p>

<p><a href="http://i1.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.00.png"><img class="size-full wp-image-144 aligncenter" src="http://i1.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.00.png?resize=349%2C206" alt="" srcset="http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.00.png?w=349 349w, http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.00.png?resize=300%2C177 300w" sizes="(max-width: 349px) 100vw, 349px" data-recalc-dims="1" /></a></p>

<p> </p>

<p>그리고 아래와 같이 항목에 값을 입력해 준다.</p>

<p><a href="http://i1.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.59.png"><img class="size-full wp-image-145 aligncenter" src="http://i1.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.59.png?resize=665%2C476" alt="" srcset="http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.59.png?w=672 672w, http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.12.59.png?resize=300%2C214 300w" sizes="(max-width: 665px) 100vw, 665px" data-recalc-dims="1" /></a></p>

<p> </p>

<pre class="lang:default decode:true ">Program:
/usr/bin/javah

Parameters:
-classpath $Classpath$ -v -jni $FileClass$

Working directory:
$SourcepathEntry$/../jni</pre>

<p>사용방법은 아주 쉽다. 워킹디렉토리를 jni로 설정했기 때문에 src -&gt; main 의 서브 디렉토리로 jni를 만들어야 한다.</p>

<p><a href="http://i0.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.16.01.png"><img class="size-full wp-image-146 aligncenter" src="http://i0.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.16.01.png?resize=306%2C153" alt="" srcset="http://i2.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.16.01.png?w=306 306w, http://i2.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.16.01.png?resize=300%2C150 300w" sizes="(max-width: 306px) 100vw, 306px" data-recalc-dims="1" /></a>class 파일에서 jni 헤더파일을 만드는 것이므로 Command + B를 눌러서 빌드한다. 그리고 나서 jni 헤더 파일을 만들고자 하는 자바 파일 위에서 마우스 오른쪽 버튼을 누른다. 그리고 NDK -&gt; javah 를 실행한다.</p>

<p><a href="http://i0.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.17.35.png"><img class="size-full wp-image-147 aligncenter" src="http://i0.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.17.35.png?resize=512%2C681" alt="" srcset="http://i1.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.17.35.png?w=512 512w, http://i1.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.17.35.png?resize=225%2C300 225w" sizes="(max-width: 512px) 100vw, 512px" data-recalc-dims="1" /></a></p>

<p> </p>

<p>그러면 그림과 같이 h 파일이 생성된다.</p>

<p><a href="http://i0.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.18.38.png"><img class="size-full wp-image-148 aligncenter" src="http://i0.wp.com/blog.burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.18.38.png?resize=378%2C184" alt="" srcset="http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.18.38.png?w=378 378w, http://i0.wp.com/burt.pe.kr/wp-content/uploads/2014/11/스크린샷-2014-11-13-오후-5.18.38.png?resize=300%2C146 300w" sizes="(max-width: 378px) 100vw, 378px" data-recalc-dims="1" /></a>아래와 같은 자바 파일이 h 파일로 변경되었다.</p>

<p>HelloNDK.java</p>

<pre class="lang:default decode:true ">package kr.pe.burt.android.hellondk;

/**
 * Created by burt on 2014. 11. 13..
 */
public class HelloNDK {
    public native void helloNDK(String msg);
}
</pre>

<p>kr_pe_burt_android_hellondk_HelloNDK.h</p>

<pre class="lang:default decode:true">/* DO NOT EDIT THIS FILE - it is machine generated */
#include &lt;jni.h&gt;
/* Header for class kr_pe_burt_android_hellondk_HelloNDK */

#ifndef _Included_kr_pe_burt_android_hellondk_HelloNDK
#define _Included_kr_pe_burt_android_hellondk_HelloNDK
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     kr_pe_burt_android_hellondk_HelloNDK
 * Method:    helloNDK
 * Signature: (Ljava/lang/String;)V
 */
JNIEXPORT void JNICALL Java_kr_pe_burt_android_hellondk_HelloNDK_helloNDK
  (JNIEnv *, jobject, jstring);

#ifdef __cplusplus
}
#endif
#endif
</pre>

<p>주의할 점은 시스템의 패스에 JDK, Android SDK, NDK 등을 모두 패스로 등록해 주어야 한다.</p>

<p> </p>

<p> </p>


		<div style='height: 20px'>
    
    	<div style='float:left'>
        <a class="equalize" href="/android-cameras-bug/" title="Previous Post: Android Camera&#8217;s Bug">
                <b> ← Android Camera&#8217;s Bug </b>
        </a>
		</div>
    
    <div style='float:right'>
        <a class="equalize" href="/ndk-build%eb%a5%bc-android-studio%ec%97%90%ec%84%9c-%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0/" title="next Post: ndk-build를 Android Studio에서 사용하기">
                <b> ndk-build를 Android Studio에서 사용하기 → </b>
        </a>
    </div>
</div>    
		
      </section>
    </div>
    <footer>
     <p></a></p>
     <p>Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    
  </body>
</html>
